````markdown
# ‚ö° NOF1 DeepSeek ‚Üí Bybit Mirror (PHP)

–ë–æ—Ç-–∑–µ—Ä–∫–∞–ª–æ, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–π —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –º–æ–¥–µ–ª–∏  
**DeepSeek Chat v3.1** —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã [nof1.ai](https://nof1.ai)  
–Ω–∞ **Bybit Linear USDT Perpetual (Unified Trading Account)**.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÅ –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π API **nof1.ai**.  
- üìä –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç, —É–º–µ–Ω—å—à–∞–µ—Ç –∏–ª–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç** –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ Bybit.  
- üéØ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç **Take Profit** –∏ **Stop Loss** –ø–æ –ø–ª–∞–Ω—É –≤—ã—Ö–æ–¥–∞ –º–æ–¥–µ–ª–∏.  
- üí∞ –£—á–∏—Ç—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É –ø–æ–∑–∏—Ü–∏–∏ (`per_symbol_max_notional`).  
- ‚öôÔ∏è –ò–º–µ–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞ –∏ —Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç (`startup_cooldown_sec`).  
- üßÆ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç **–ø–ª–µ—á–æ (leverage)** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.  
- üíé –í–µ–¥—ë—Ç —Ä–∞–∑–¥–µ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤ —Ñ–∞–π–ª ‚Äî —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—è, –≤ –∫–æ–Ω—Å–æ–ª—å ‚Äî –≤—Å—ë).  
- ‚ö° –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π **–º–æ–¥—É–ª—å —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞** (–≤ —Ä–µ–∂–∏–º–µ long).  

---

## üß© –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/bambone/nof1-mirror.git
cd nof1-mirror
composer install
````

---

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª—é—á–µ–π

–°–æ–∑–¥–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è Git):

```bash
cp config/nof1_bybit.example.php config/nof1_bybit.local.php
```

–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–∏ Bybit:

```php
return [
    'bybit' => [
        'base_url'   => 'https://api.bybit.com',
        'api_key'    => 'YOUR_REAL_API_KEY',
        'api_secret' => 'YOUR_REAL_API_SECRET',
    ],
];
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª ‚Äî `config/config.global.php`.

### –û—Å–Ω–æ–≤–Ω—ã–µ –±–ª–æ–∫–∏:

| –†–∞–∑–¥–µ–ª          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                      |
| --------------- | ----------------------------------------------- |
| `nof1`          | –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ (DeepSeek Chat v3.1)          |
| `bybit.account` | —Ç–∏–ø –∞–∫–∫–∞—É–Ω—Ç–∞, –ø–ª–µ—á–æ, —Ä–µ–∂–∏–º –ø–æ–∑–∏—Ü–∏–∏              |
| `sizing`        | –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
| `risk`          | —É—Å—Ç–∞–Ω–æ–≤–∫–∞ TP/SL                                 |
| `guards`        | –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—Ö–æ–¥–æ–≤                      |
| `log`           | —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è                              |
| `scalp`         | –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω–æ–≥–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è           |

---

### –ü—Ä–∏–º–µ—Ä `sizing`

```php
'sizing' => [
    'mode'  => 'mirror-scale',
    'scale' => 0.05,

    'tolerance' => [
        'mode'  => 'by_step',
        'value' => 1.0,
        'per_symbol' => [
            'BTCUSDT' => ['mode' => 'by_step', 'value' => 2.0],
            'DOGEUSDT'=> ['mode' => 'notional_usd', 'value' => 1.0],
            'XRPUSDT' => ['mode' => 'notional_usd', 'value' => 1.0],
        ],
    ],

    'max_symbols'             => 2,
    'per_symbol_max_notional' => 20,
],
```

---

### –ù–æ–≤—ã–π –±–ª–æ–∫ `scalp`

```php
'scalp' => [
    'enabled' => false,              // ‚Üê –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è
    'per_trade_notional_cap' => 5.0, // —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π —Å–¥–µ–ª–∫–∏ (USD)
    'min_free_balance_usd'   => 15.0,
    'max_concurrent_scalps'  => 1,
    'fees' => [
        'maker' => 0.00020,
        'taker' => 0.00055,
        'slippage_bp' => 2.0
    ],
],
```

> üí° –°–∫–∞–ª—å–ø–∏–Ω–≥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±–æ—Ç —Å—Ç–æ–∏—Ç –≤ **–ª–æ–Ω–≥–µ**,
> –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å –≤—ã—à–µ `min_free_balance_usd`,
> –∏ —Å—É–º–º–∞ —Å–¥–µ–ª–∫–∏ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç `per_trade_notional_cap`.

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API Bybit

```bash
php cli/test_bybit_keys.php
```

### –ê–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–µ—á–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é)

```bash
php cli/set_leverage.php
```

### –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```bash
php cli/follow_deepseek.php
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

```
üöÄ DeepSeek Mirror started
üõ†  Setting leverage=10x for mapped symbols‚Ä¶
‚úÖ BTCUSDT: leverage set to 10x
‚úÖ DOGEUSDT: leverage set to 10x
üéØ Following model: deepseek-chat-v3.1
=== Tick 1 @ 07:31:40 ===
üìà OPEN Buy DOGEUSDT qty=51
‚úÖ Sync complete.
```

### –°–∫–∞–ª—å–ø–∏–Ω–≥-–º–æ–¥—É–ª—å (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç)

```bash
php cli/scalp_long.php
```

–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, —Å–ª–µ–¥–∏—Ç –∑–∞ —Ä—ã–Ω–∫–æ–º –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–∏–∫—Ä–æ–≤—Ö–æ–¥—ã
–≤ —Å—Ç–æ—Ä–æ–Ω—É —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –º–æ–¥–µ–ª–∏ (–ª–æ–Ω–≥).



---



–°–ü–û–¢ 


## ü™µ –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ä–∞—Å—á—ë—Ç—ã –∏ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –¥–≤—É—Ö –ø–æ—Ç–æ–∫–∞—Ö:

| –§–∞–π–ª                 | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                          |
| -------------------- | --------------------------------------------------- |
| `var/spot_scalp.log` | –ü–æ–¥—Ä–æ–±–Ω—ã–µ —à–∞–≥–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (DEBUG, INFO, WARN, ERROR) |
| `var/spot_deals.log` | –¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (BUY / SELL / FILL)          |

---

### üîπ –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π

| –£—Ä–æ–≤–µ–Ω—å  | –ü—Ä–µ—Ñ–∏–∫—Å –≤ –ª–æ–≥–µ                    | –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç                                              |
| -------- | --------------------------------- | --------------------------------------------------------- |
| `DEBUG`  | `üßÆ`, `üìâ`, `‚Ü©Ô∏è`, `‚è±`, `üî¢`, `üì¶` | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏: –¥–∏–∞–ø–∞–∑–æ–Ω—ã, —Ä–∞—Å—á—ë—Ç—ã, —Ñ–∏–ª—å—Ç—Ä—ã, –ø—Ä–æ–ø—É—Å–∫–∏ |
| `INFO`   | `üü¢`, `ü§ù`, `‚õî`, `üí§`             | –û–±—â–∏–µ —Å—Ç–∞—Ç—É—Å—ã, —Å—Ç–∞—Ä—Ç, –≤—ã–∫–ª—é—á–µ–Ω–∏–µ, –ø–æ–¥—Ö–≤–∞—Ç –∞–∫—Ç–∏–≤–æ–≤         |
| `ACTION` | `üü© BUY`, `üü• SELL`               | –†–µ–∞–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞                                |
| `WARN`   | `‚ö†Ô∏è`, `‚è≥`, `üö´`                   | –û—à–∏–±–∫–∏ API, —Ç–∞–π–º–∞—É—Ç—ã, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞          |
| `ERROR`  | `‚ùå`                               | –ò—Å–∫–ª—é—á–µ–Ω–∏—è PHP, —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏, —Å–±–æ–∏ Bybit API            |

---

### üßæ –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

#### –°—Ç–∞—Ä—Ç –∏ –ø–æ–¥—Ö–≤–∞—Ç

```
[2025-10-23 07:15:01] INFO    üü¢ Spot Range Scalp started
[2025-10-23 07:15:03] INFO    ü§ù –ü–æ–¥—Ö–≤–∞—Ç–∏–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–ø–æ—Ç XRPUSDT: qty=16.64, entry‚âà2.4012
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

```
[2025-10-23 07:16:10] DEBUG   üßÆ XRPUSDT: min=2.398000 max=2.411000 last=2.402000 rel=30.2% range=0.54% target‚âà0.45% costs‚âà0.11% need‚âà0.56%
```

#### –ü–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞

```
[2025-10-23 07:17:02] DEBUG   ‚úÖ –í–•–û–î-–ö–ê–ù–î–ò–î–ê–¢ XRPUSDT: rel=19.8%; qty‚âà8.0 (~$19.21) ‚Üí BUY‚Ä¶
[2025-10-23 07:17:02] ACTION  üü© BUY XRPUSDT qty=8 @~2.4012 (‚âà$19.21)
```

#### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

```
[2025-10-23 07:17:03] ACTION  FILL BUY XRPUSDT execId=ab23cd qty=8.0 price=2.4012
```

#### –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã—Ö–æ–¥–∞

```
[2025-10-23 07:24:10] DEBUG   ‚è± XRPUSDT: –¥–µ—Ä–∂–∏–º. last=2.406 < take(min)=2.414; need>=+0.56%
```

#### –§–∏–∫—Å–∞—Ü–∏—è –ø—Ä–∏–±—ã–ª–∏

```
[2025-10-23 07:29:11] DEBUG   üéØ XRPUSDT: hold qty=8.00000000 entry=2.401200 last=2.416000 need>=0.0056 (0.56%) / range<=2.410000 ‚Üí profit=yes
[2025-10-23 07:29:11] ACTION  üü• SELL XRPUSDT qty=8 @~2.416 (P‚âà0.62%)
```

#### –û—à–∏–±–∫–∞ API –∏ –±—ç–∫–æ—Ñ—Ñ

```
[2025-10-23 07:30:02] ERROR   ‚ùå Error: Client error: `GET https://nof1.ai/api/account_totals` ‚Üí 502 Bad Gateway
[2025-10-23 07:30:02] WARN    ‚è≥ Backoff 5000ms due to error.
```

---

### üî∏ –¶–≤–µ—Ç–æ–≤–∞—è –ª–µ–≥–µ–Ω–¥–∞ –¥–µ–π—Å—Ç–≤–∏–π

| –¶–≤–µ—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ              | –ü—Ä–∏–º–µ—Ä                                   |
| ---- | --------------------- | ---------------------------------------- |
| üü¢   | –∑–∞–ø—É—Å–∫, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å    | `üü¢ Spot Range Scalp started`            |
| üü©   | –ø–æ–∫—É–ø–∫–∞ (–≤—Ö–æ–¥)        | `üü© BUY XRPUSDT qty=8 @~2.4012`          |
| üü•   | –ø—Ä–æ–¥–∞–∂–∞ (–≤—ã—Ö–æ–¥)       | `üü• SELL XRPUSDT qty=8 @~2.4158`         |
| üßä   | –∫—É–ª–¥–∞—É–Ω –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ | `üßä XRPUSDT: cooldown –µ—â—ë 5s ‚Äî –ø—Ä–æ–ø—É—Å–∫`  |
| ‚ö†Ô∏è   | –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ        | `‚ö†Ô∏è API timeout, retrying...`            |
| ‚ùå    | –æ—à–∏–±–∫–∞                | `‚ùå Bybit API returned 410 Gone`          |
| ü§ù   | –ø–æ–¥—Ö–≤–∞—Ç —Å–ø–æ—Ç–∞         | `ü§ù –ü–æ–¥—Ö–≤–∞—Ç–∏–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–ø–æ—Ç XRPUSDT` |

---

### üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`state.json`)

```json
{
  "XRPUSDT": {
    "spot_hold": {
      "qty": 8.0,
      "entry": 2.4012
    },
    "last_buy_ts": 1729653120
  },
  "DOGEUSDT": {
    "spot_hold": {
      "qty": 0.0,
      "entry": 0.0
    }
  }
}
```

---

### üß∞ –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

| –£—Ä–æ–≤–µ–Ω—å  | –í–∫–ª—é—á–∞–µ—Ç                 | –ì–¥–µ –ø–∏—à–µ—Ç—Å—è    |
| -------- | ------------------------ | -------------- |
| `debug`  | –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è            | –∫–æ–Ω—Å–æ–ª—å + —Ñ–∞–π–ª |
| `notice` | —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—è –∏ –æ—à–∏–±–∫–∏ | —Ñ–∞–π–ª           |
| `error`  | —Ç–æ–ª—å–∫–æ —Ñ–∞—Ç–∞–ª—å–Ω—ã–µ         | —Ñ–∞–π–ª           |

–ó–∞–¥–∞—é—Ç—Å—è –≤ `config/nof1_bybit.local.php`:

```php
'log' => [
  'file_level'    => 'notice',
  'console_level' => 'debug',
  'spot_file'     => __DIR__ . '/../var/spot_scalp.log',
  'spot_deals_file' => __DIR__ . '/../var/spot_deals.log',
],
```


---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
cli/
  follow_deepseek.php     ‚Üí –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
  set_leverage.php        ‚Üí —Ä—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–µ—á–∞
  scalp_long.php          ‚Üí —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π HFT –º–æ–¥—É–ª—å

config/
  config.global.php        ‚Üí –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  nof1_bybit.local.php     ‚Üí –∫–ª—é—á–∏ API (–≤ .gitignore)

src/
  Infra/BybitClient.php    ‚Üí –æ–±—ë—Ä—Ç–∫–∞ Bybit REST v5
  App/Reconciler.php       ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π
  App/Logger.php           ‚Üí –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  App/StateStore.php       ‚Üí –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

var/
  deepseek_follow.log      ‚Üí –ª–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π
  state.json               ‚Üí –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

---

## üß† –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* –ö–ª—é—á–∏ Bybit —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ.
* `.gitignore` –∑–∞—â–∏—â–∞–µ—Ç `*.local.php`, `var/`, –ª–æ–≥–∏ –∏ —Å—Ç–µ–π—Ç.
* –°–∫—Ä–∏–ø—Ç—ã –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç API-—Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ª–æ–≥–∞—Ö.

---

## üß± –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* PHP 8.2+
* GuzzleHTTP
* Bybit REST V5
* JSON state persistence
* CLI —Å graceful shutdown

---

## üë§ –ê–≤—Ç–æ—Ä

**Andrey Dupliakin (bambone)**
[GitHub](https://github.com/bambone) ¬∑ [nof1.ai](https://nof1.ai)

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ¬© 2025 Andrey Dupliakin

```